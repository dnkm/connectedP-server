(this.webpackJsonpConnectedPeer=this.webpackJsonpConnectedPeer||[]).push([[0],{114:function(e,t,a){},157:function(e,t,a){e.exports=a(217)},214:function(e,t){},217:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(19),l=a.n(s),i=a(54),c=a(9),o=a(10),m=a(12),u=a(11),d=(a(114),a(162),a(23)),p=a(8),h=a.n(p),v=a(20),f=a(15),E=a(42),b=a.n(E),g={getLoggedIn:function(){return new Promise((function(e,t){b.a.get("".concat("/api")).then((function(t){return e(t.data)})).catch((function(e){t(e)}))}))},getUser:function(){return new Promise((function(e,t){b.a.get("".concat("/api","/user")).then((function(t){return e(t.data)})).catch((function(e){t(e)}))}))},getUserWithId:function(e){return new Promise((function(t,a){b.a.get("".concat("/api","/user/").concat(e)).then((function(e){return t(e.data)})).catch((function(e){a(e)}))}))},postUserUpdate:function(e){return new Promise((function(t,a){b.a.post("".concat("/api","/updateUser"),e).then((function(e){return t(e.data)})).catch((function(e){a(e)}))}))},postTutorPost:function(e){return new Promise((function(t,a){b.a.post("".concat("/api","/tutorPost"),e).then((function(e){return t(e.data)})).catch((function(e){a(e)}))}))},makeAppointment:function(e){return new Promise((function(t,a){b.a.post("".concat("/api","/makeAppointment"),e).then((function(e){return t(e.data)})).catch((function(e){a(e)}))}))},cancelAppointment:function(e){return new Promise((function(t,a){b.a.post("".concat("/api","/cancelAppointment"),e).then((function(e){return t(e.data)})).catch((function(e){a(e)}))}))},getTutorResults:function(e){return new Promise((function(t,a){b.a.post("".concat("/api","/getTutors"),e).then((function(e){t(e.data)})).catch((function(e){a(e)}))}))}},N=a(62),y=a.n(N),w=a(265),C=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.a.AutoInit();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.user_data.logged_in?(console.log(this.props.user_data),r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement("div",{className:"user-view"},r.a.createElement("div",{className:"background"},r.a.createElement("img",{src:"/cloudBackground.jpg",alt:"user background"})),r.a.createElement("a",{href:"/user/"+this.props.user_data._id},r.a.createElement("img",{className:"circle",src:this.props.user_data.image,alt:"user pfp"})),r.a.createElement("a",{href:"/user/"+this.props.user_data._id},r.a.createElement("span",{className:"white-text name"},this.props.user_data.displayName)),r.a.createElement("a",{href:"/user/"+this.props.user_data._id},r.a.createElement("span",{className:"white-text email"},this.props.user_data.email)),r.a.createElement("a",{href:"/user/update"},r.a.createElement("span",{className:"white-text"},r.a.createElement("i",{className:"fas fa-user-circle fa-small"})," Edit User Info")))),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect",href:"/"},"Dashboard")),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect",href:"/appointments"},"Appointments")),r.a.createElement("li",null,r.a.createElement("div",{className:"divider"})),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect waves-cyan",href:"/learn"},"Learn as a Student")),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect waves-green",href:"/volunteer"},"Volunteer as a Tutor")),r.a.createElement("li",null,r.a.createElement("div",{className:"divider"})),r.a.createElement("li",null,r.a.createElement("a",{className:"subheader",href:"#!"},"Contacts:")),this.props.user_data.contacts.map((function(t,a){return r.a.createElement("li",{key:a},r.a.createElement("a",{className:"waves-effect waves-green",href:"/user/"+t},r.a.createElement("div",{className:"row center"},r.a.createElement("div",{className:"col s2"},r.a.createElement(w.a,{variant:"square",className:"avatar-helper",src:e.props.user_data.contacts_data[t].image,alt:e.props.user_data.contacts_data[t].firstName+"'s pfp"})),r.a.createElement("div",{className:"col s10"},e.props.user_data.contacts_data[t].displayName))))})),r.a.createElement("li",null,r.a.createElement("div",{className:"divider"})),r.a.createElement("li",null,r.a.createElement("a",{className:"subheader",href:"https://connectedpeertutoring.org/"},"\xa9 2020 CPT")),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect",href:"https://connectedpeertutoring.org/about"},"About Us")),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect",href:"https://connectedpeertutoring.org/report"},"Report")),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect",href:"https://connectedpeertutoring.org/privacy-policy"},"Privacy Policy")),r.a.createElement("li",null,r.a.createElement("div",{className:"divider"})),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect",href:"http://localhost:3001/auth/logout"},"Logout")))):r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect",href:"https://connectedpeertutoring.org"},"About Us")),r.a.createElement("li",null,r.a.createElement("div",{className:"divider"})),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect",href:"http://localhost:3001/auth/google"},"Login/Signup")))}}]),a}(n.Component),_=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("nav",{className:"primary-color-background"},r.a.createElement("div",{className:"nav-wrapper container"},r.a.createElement("a",{href:"/",className:"brand-logo center"},"ConnectedPeer"),r.a.createElement("a",{href:"/","data-target":"slide-out",className:"sidenav-trigger show-on-large"},r.a.createElement("i",{className:"material-icons"},"menu")),r.a.createElement("ul",{className:"sidenav",id:"slide-out"},r.a.createElement(C,{user_data:this.props.user_data}))))}}]),a}(n.Component),S=a(18),j=a.n(S),A=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={userId:null,tutor:null},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.appointment[1];case 2:return e.t0=e.sent,e.next=5,this.props.user_data._id;case 5:if(e.t1=e.sent,e.t0!==e.t1){e.next=10;break}this.setState({userId:this.props.appointment[2],tutor:!1}),e.next=11;break;case 10:this.setState({userId:this.props.appointment[1],tutor:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.userId&&this.props.user_data.contacts_data?r.a.createElement("div",{className:this.state.tutor?"card-panel teal":"card-panel cyan"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl6"},r.a.createElement("a",{href:"/user/"+this.state.userId},r.a.createElement("h5",{className:"white-text"},r.a.createElement("strong",null,"Appointment with"," ",this.props.user_data.contacts_data[this.state.userId].displayName))),r.a.createElement("h6",{className:"white-text"},j()(this.props.appointment[0]).local().format("h:mm A, dddd MMMM Do, YYYY"))),r.a.createElement("div",{className:"col s12 xl6"},r.a.createElement("a",{className:"waves-effect white-text",href:"/user/"+this.props.user_data.contacts_data[this.state.userId]._id},r.a.createElement("h5",{className:"white-text"},"Tutor:"," ",this.state.tutor?this.props.user_data.displayName:this.props.user_data.contacts_data[this.state.userId].displayName))),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"divider"}),r.a.createElement("a",{className:this.state.tutor?"waves-effect btn white teal-text":"waves-effect btn white cyan-text",style:{margin:"0.5em"},href:"/chat/"+this.props.user_data.contacts_data[this.state.userId].chatRoom},"Chat",r.a.createElement("i",{className:"material-icons right"},"chat"))," ",r.a.createElement("a",{className:this.state.tutor?"waves-effect btn white teal-text":"waves-effect btn white cyan-text",style:{margin:"0.5em"},target:"_blank",rel:"noopener noreferrer",href:this.props.appointment[4]},"Join Google Meet",r.a.createElement("i",{className:"material-icons right"},"videocam"))," ",r.a.createElement("a",{className:this.state.tutor?"waves-effect btn white teal-text":"waves-effect btn white cyan-text",style:{margin:"0.5em"},target:"_blank",rel:"noopener noreferrer",href:"https://jamboard.google.com/d/"+this.props.appointment[5]},"Open Jamboard",r.a.createElement("i",{className:"material-icons right"},"create"))," ",r.a.createElement("a",{className:this.state.tutor?"waves-effect btn teal white-text modal-trigger":"waves-effect btn cyan white-text modal-trigger",style:{margin:"0.5em"},href:"#cancelAppointmentModal",onClick:function(){return e.props.updateChosenAppointment(e.props.appointment,e.props.user_data.contacts_data[e.state.userId])}},"Cancel ",r.a.createElement("i",{className:"material-icons right"},"delete_forever"))))):r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))}}]),a}(n.Component),O=a(264),k=a(263),x=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onSubmit=n.onSubmit.bind(Object(f.a)(n)),n.state={openSuccess:!1,openErr:!1},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){y.a.AutoInit()}},{key:"onSubmit",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var a=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,g.cancelAppointment(this.props.appointment).then((function(e){e.success?a.setState({openSuccess:!0}):a.setState({openErr:!0})}));case 3:this.props.updateState();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("span",{onClick:function(t){return e.setState({openErr:!1,openSuccess:!1})}},r.a.createElement("div",{id:"cancelAppointmentModal",className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("h3",{className:"red-text"},"Cancel Appointment with ",this.props.user_data.firstName),r.a.createElement("h4",null,j()(this.props.appointment[0]).local().format("h:mm A, dddd MMMM Do, YYYY")),r.a.createElement("h5",{className:"red-text"},"You may be penalized for cancelling an appointment")),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("a",{href:"#!",className:"waves-effect waves-light btn red modal-close",onClick:this.onSubmit},"Cancel Appointment",r.a.createElement("i",{className:"material-icons right"},"delete_forever")))),r.a.createElement(O.a,{open:this.state.openErr,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(k.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Appointment could not be cancelled")),r.a.createElement(O.a,{open:this.state.openSuccess,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(k.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"success"},"Appointment with ",this.props.user_data.firstName," cancelled")))}}]),a}(n.Component),P=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).updateChosenAppointment=n.updateChosenAppointment.bind(Object(f.a)(n)),n.state={appointment:[],user_data:{},tutor:null},n}return Object(o.a)(a,[{key:"updateChosenAppointment",value:function(e,t){this.setState({appointment:e,user_data:t})}},{key:"render",value:function(){var e=this;return this.props.user_data._id?this.props.user_data.appointments.length>0?r.a.createElement("div",null,r.a.createElement("h5",null,"Future Appointments:"),this.props.user_data.appointments.map((function(t,a){return r.a.createElement(A,{key:a,user_data:e.props.user_data,appointment:t,updateChosenAppointment:e.updateChosenAppointment})})),r.a.createElement(x,{user_data:this.state.user_data,appointment:this.state.appointment,updateState:this.props.updateState})):r.a.createElement("h5",null,"You have no future appointments"):r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))}}]),a}(n.Component),M=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){if(!this.props.user_data._id)return r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))));0===this.props.user_data.grade&&(window.location.href="/tutorial");var e=Math.ceil(.25*Math.pow(10,Math.ceil(Math.log10(this.props.user_data.hours+1)))*Math.ceil((this.props.user_data.hours+1)/(.25*Math.pow(10,Math.ceil(Math.log10(this.props.user_data.hours+1))))));return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl8 offset-xl2"},r.a.createElement("h4",{className:"primary-color"},"Welcome ",this.props.user_data.displayName),r.a.createElement("div",null,"You have volunteered for: ",this.props.user_data.hours," hours"),r.a.createElement("div",null,"Current Goal: ",e," hours"),r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"determinate teal",style:{width:this.props.user_data.hours/e*100+"%"}})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl4 offset-xl2"},r.a.createElement(P,{user_data:this.props.user_data,updateState:this.props.updateState})),r.a.createElement("div",{className:"col s12 xl4"},r.a.createElement("h5",null,"Get started:"),r.a.createElement("div",{className:"card-panel flex-container"},r.a.createElement("h5",{className:"cyan-text space-between"},"Learn as a peer student",r.a.createElement("a",{className:"waves-effect waves-light btn-large cyan",href:"/learn"},r.a.createElement("i",{className:"material-icons"},"trending_up")))),r.a.createElement("div",{className:"card-panel flex-container"},r.a.createElement("h5",{className:"teal-text space-between"},"Volunteer as a peer tutor",r.a.createElement("a",{className:"waves-effect waves-light btn-large teal",href:"/volunteer"},r.a.createElement("i",{className:"material-icons"},"trending_up")))))))}}]),a}(n.Component),D=a(84),Y=a(256),T=a(25),I=a(257),B=a(266),H=a(262),L=a(261),U=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onChangeAvailableStart=n.onChangeAvailableStart.bind(Object(f.a)(n)),n.onChangeAvailableEnd=n.onChangeAvailableEnd.bind(Object(f.a)(n)),n.onChangeSubjects=n.onChangeSubjects.bind(Object(f.a)(n)),n.onChangeBio=n.onChangeBio.bind(Object(f.a)(n)),n.onSubmit=n.onSubmit.bind(Object(f.a)(n)),n.state={availableStart:j()().startOf("hour").add(24,"h"),availableEnd:j()().startOf("hour").add(25,"h"),subjects:[],bio:"",openSuccess:!1,openErrTime:!1,openErrSubject:!1,openErrBio:!1},n}return Object(o.a)(a,[{key:"onChangeAvailableStart",value:function(e){this.setState({availableStart:e,openSuccess:!1,openErrTime:!1,openErrSubject:!1,openErrBio:!1})}},{key:"onChangeAvailableEnd",value:function(e){this.setState({availableEnd:e,openSuccess:!1,openErrTime:!1,openErrSubject:!1,openErrBio:!1})}},{key:"onChangeSubjects",value:function(e,t){this.setState({subjects:t,openSuccess:!1,openErrTime:!1,openErrSubject:!1,openErrBio:!1})}},{key:"onChangeBio",value:function(e){this.setState({bio:e.target.value,openSuccess:!1,openErrTime:!1,openErrSubject:!1,openErrBio:!1})}},{key:"onSubmit",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var a,n,r,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.state.availableStart.clone(),n=this.state.availableEnd.clone(),n=a.clone().startOf("day").hour(n.hour()).minute(n.minute()).utc().valueOf(),a=a.utc().valueOf(),n<a&&n-a<=432e5&&(n+=864e5),a+36e5>n)this.setState({openErrTime:!0});else if(0===this.state.subjects.length&&0===this.props.user_data.subjects.length)this.setState({openErrSubject:!0});else if(0===this.state.bio.length&&0===this.props.user_data.bio.length)this.setState({openErrBio:!0});else{for(r=this.props.user_data.tutorAvailability,s=Math.ceil(a/18e5);s<Math.floor(n/18e5);s++)r.indexOf(18e5*s)<0&&r.push(18e5*s);l={subjects:0===this.state.subjects.length?this.props.user_data.subjects:this.state.subjects,bio:this.state.bio?this.state.bio:this.props.user_data.bio,tutorAvailability:r},g.postTutorPost(l),this.setState({openSuccess:!0})}case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.props.user_data._id?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl6 offset-xl3"},r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col s12",onSubmit:this.onSubmit,id:"Post_Tutor_Form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(Y.a,{container:!0,justify:"space-between"},r.a.createElement(T.a,{utils:D.a},r.a.createElement(I.a,{variant:"inline",margin:"normal",id:"date_available",label:"Date available",format:"M/D/YYYY",value:this.state.availableStart,onChange:this.onChangeAvailableStart,KeyboardButtonProps:{"aria-label":"change date"}}),r.a.createElement(B.a,{variant:"inline",margin:"normal",id:"time_available_start",label:"Available time range start",value:this.state.availableStart,onChange:this.onChangeAvailableStart,KeyboardButtonProps:{"aria-label":"change time"}}),r.a.createElement(B.a,{variant:"inline",margin:"normal",id:"time_available_end",label:"Available time range end",value:this.state.availableEnd,onChange:this.onChangeAvailableEnd,KeyboardButtonProps:{"aria-label":"change time"}}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(H.a,{multiple:!0,id:"subjects",size:"small",options:W,getOptionLabel:function(e){return e},filterSelectedOptions:!0,defaultValue:this.props.user_data.subjects,onChange:this.onChangeSubjects,renderInput:function(e){return r.a.createElement(L.a,Object.assign({},e,{label:"Subjects",helperText:"List the subjects you can be a tutor in"}))}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(L.a,{margin:"normal",id:"standard-multiline-static",multiline:!0,fullWidth:!0,placeholder:"Ex: I'm a junior in University High School. I have been a peer tutor for 3 months. I have recieved a 5 on AP Biology and AP Calculus AB and can tutor in those subjects.",label:"Bio:",defaultValue:this.props.user_data.bio,helperText:"Provide information about you for the peer students",onChange:this.onChangeBio}))),r.a.createElement("input",{type:"submit",value:"Post",className:"waves-effect waves-light btn teal"})))),r.a.createElement(O.a,{open:this.state.openErrTime,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(k.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Your availabilty must be atleast an hour")),r.a.createElement(O.a,{open:this.state.openErrSubject,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(k.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Please input the subject(s) you can tutor")),r.a.createElement(O.a,{open:this.state.openErrBio,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(k.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Please input more information on your bio")),r.a.createElement(O.a,{open:this.state.openSuccess,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(k.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"success"},"Your tutor availabilty has been succesfully posted"))):r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))}}]),a}(n.Component),W=["Math","Algebra","Algebra 2","Geometry","Precalculus","AP Statistics","Calculus","AP Calculus AB","AP Calculus BC","AP Economics Micro","AP Economics Macro","Biology","AP Biology","AP Enviromental Science","Chemistry","AP Chemistry","Physics","AP Physics 1","AP Physics 2","AP Physics C","English","AP English Lang","AP English Lit","AP Psychology","History","AP Human Geography","AP US History","AP European History","AP World History","Spanish","AP Spanish","Chinese","AP Chinese","French","AP French","AP Computer Science P","AP Computer Science A"],G=U,F=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onChangeDisplayName=n.onChangeDisplayName.bind(Object(f.a)(n)),n.onChangeFirstName=n.onChangeFirstName.bind(Object(f.a)(n)),n.onChangeLastName=n.onChangeLastName.bind(Object(f.a)(n)),n.onChangeGrade=n.onChangeGrade.bind(Object(f.a)(n)),n.handleClose=n.handleClose.bind(Object(f.a)(n)),n.onChangeBio=n.onChangeBio.bind(Object(f.a)(n)),n.onChangeSubject=n.onChangeSubject.bind(Object(f.a)(n)),n.onChangeTutorAvailability=n.onChangeTutorAvailability.bind(Object(f.a)(n)),n.onSubmit=n.onSubmit.bind(Object(f.a)(n)),n.state={_id:null,email:null,subjects:[],tutorAvailability:[],displayName:null,grade:0,firstName:null,lastName:null,bio:null,openSuccess:!1,openErr:!1},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.getUser().then((function(e){t.setState({_id:e._id,email:e.email,subjects:e.subjects,tutorAvailability:e.tutorAvailability,displayName:e.displayName,grade:e.grade,firstName:e.firstName,lastName:e.lastName,bio:e.bio})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"onChangeDisplayName",value:function(e){this.setState({displayName:e.target.value,openSuccess:!1,openErr:!1})}},{key:"onChangeFirstName",value:function(e){this.setState({firstName:e.target.value,openSuccess:!1,openErr:!1})}},{key:"onChangeLastName",value:function(e){this.setState({lastName:e.target.value,openSuccess:!1,openErr:!1})}},{key:"onChangeGrade",value:function(e,t){this.setState({grade:t.i,openSuccess:!1,openErr:!1})}},{key:"onChangeBio",value:function(e){this.setState({bio:e.target.value,openSuccess:!1,openErr:!1})}},{key:"onChangeSubject",value:function(e){this.setState({subjects:this.state.subjects.filter((function(t){return e.target.toString().replace(/%20/g," ").indexOf(t)<0}))})}},{key:"onChangeTutorAvailability",value:function(e){this.setState({tutorAvailability:this.state.tutorAvailability.filter((function(t){return e.target.toString().indexOf(t.toString())<0}))})}},{key:"onSubmit",value:function(e){e.preventDefault();var t={displayName:this.state.displayName,grade:this.state.grade,firstName:this.state.firstName,lastName:this.state.lastName,bio:this.state.bio,subjects:this.state.subjects,tutorAvailability:this.state.tutorAvailability};0===this.state.grade&&0===this.props.user_data.grade?this.setState({openErr:!0}):0===this.props.user_data.grade?(g.postUserUpdate(t),this.setState({openSuccess:!0}),window.location.href="/"):(g.postUserUpdate(t),this.setState({openSuccess:!0}))}},{key:"handleClose",value:function(e,t){"clickaway"!==t&&this.setState({openSuccess:!1,openErr:!1})}},{key:"render",value:function(){var e=this;return this.state._id?r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl6 offset-xl3"},r.a.createElement("div",{className:"card-panel grey lighten-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s3 xl1"},r.a.createElement("a",{href:"/user/"+this.props.user_data._id},r.a.createElement("img",{className:"circle responsive-img",alt:this.state.displayName+"'s pfp",src:this.props.user_data.image}))),r.a.createElement("div",{className:"col s11"},r.a.createElement("h6",{className:"primary-color"},this.state.displayName),this.state.grade>0?r.a.createElement("div",{className:"primary-color"},r.a.createElement("span",{className:"black-text"},"Grade: "),V[V.findIndex((function(t){return t.i===e.state.grade}))].grade):null,r.a.createElement("div",{className:"primary-color"},r.a.createElement("span",{className:"black-text"},"Hours Volunteered: "),this.props.user_data.hours),this.state.subjects.map((function(t,a,n){return 0===n.length?null:0===a?r.a.createElement("span",null,"Subjects ",e.state.firstName," can tutor:"," ",r.a.createElement("a",{className:"waves-effect waves-light",href:"#"+t,onClick:e.onChangeSubject},t+" ",r.a.createElement("i",{className:"tiny material-icons"},"clear"))):r.a.createElement("span",{className:"secondary-color"},","," ",r.a.createElement("a",{className:"waves-effect waves-light",href:"#"+t,onClick:e.onChangeSubject},t+" ",r.a.createElement("i",{className:"tiny material-icons"},"clear")))})),r.a.createElement("div",null,this.state.bio?"About "+this.state.firstName+":":null,r.a.createElement("div",{className:"secondary-color"},this.state.bio)))),r.a.createElement("div",{className:"row"},this.state.tutorAvailability.map((function(t,a,n){if(0===n.length)return null;var s=j()(t).local();if(0===a)return r.a.createElement("span",null,r.a.createElement("div",{className:"divider"}),r.a.createElement("h6",null,"Tutor Availability:"),r.a.createElement("h6",{className:"primary-color"},s.format("dddd MMMM Do, YYYY")),r.a.createElement("span",null,r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small",href:"#"+t,onClick:e.onChangeTutorAvailability},s.format("h:mm A "),r.a.createElement("i",{className:"tiny material-icons"},"clear"))));var l=j()(n[a-1]).local();return s.format("d")!==l.format("d")?r.a.createElement("span",null,r.a.createElement("div",{className:"divider"}),r.a.createElement("h6",{className:"primary-color"},s.format("dddd MMMM Do, YYYY")),r.a.createElement("span",null,r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small",href:"#"+t,onClick:e.onChangeTutorAvailability},s.format("h:mm A "),r.a.createElement("i",{className:"tiny material-icons"},"clear")))):r.a.createElement("span",null,r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small",href:"#"+t,onClick:e.onChangeTutorAvailability},s.format("h:mm A "),r.a.createElement("i",{className:"tiny material-icons"},"clear")))})))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl6 offset-xl3"},r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col s12",onSubmit:this.onSubmit,id:"User_Update_Form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(L.a,{id:"name",fullWidth:!0,onChange:this.onChangeDisplayName,label:"Display Name",defaultValue:this.state.displayName}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s6"},r.a.createElement(L.a,{id:"first_name",fullWidth:!0,onChange:this.onChangeFirstName,label:"First name",defaultValue:this.state.firstName})),r.a.createElement("div",{className:"input-field col s6"},r.a.createElement(L.a,{id:"last_name",fullWidth:!0,onChange:this.onChangeLastName,label:"Last name",defaultValue:this.state.lastName}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(L.a,{disabled:!0,id:"email",fullWidth:!0,type:"email",defaultValue:this.state.email,label:"Email",className:"validate"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(H.a,{id:"grade-level",options:V,getOptionLabel:function(e){return e.grade},defaultValue:this.state.grade>0?V[V.findIndex((function(t){return t.i===e.state.grade}))]:null,onChange:this.onChangeGrade,renderInput:function(e){return r.a.createElement(L.a,Object.assign({},e,{label:"Grade"}))}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(L.a,{margin:"normal",id:"standard-multiline-static",multiline:!0,fullWidth:!0,placeholder:"Your Bio: (ex: I'm a junior in University High School.)",label:"Bio:",defaultValue:this.state.bio,helperText:"Provide information about you for your peers",onChange:this.onChangeBio}))),r.a.createElement("input",{type:"submit",value:"Update",className:"waves-effect waves-light btn tertiary-color-background"})))),r.a.createElement(O.a,{open:this.state.openErr,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(k.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Please input your grade")),r.a.createElement(O.a,{open:this.state.openSuccess,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(k.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"success"},"Your user info has been successfully changed")))):r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))}}]),a}(n.Component),V=[{grade:"7",i:7},{grade:"8",i:8},{grade:"9",i:9},{grade:"10",i:10},{grade:"11",i:11},{grade:"12",i:12},{grade:"College and above",i:13}],q=F,R=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onSubmit=n.onSubmit.bind(Object(f.a)(n)),n.state={openSuccess:!1,openErr:!1,openErrWait:!1,waiting:!1},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){y.a.AutoInit()}},{key:"onSubmit",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var a,n=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.state.waiting){e.next=3;break}return e.abrupt("return",this.setState({openErrWait:!0}));case 3:return a={appointment:[this.props.appointment_time,this.props.user_data._id,this.props.tutor_data._id,null,null,null,!1]},this.setState({waiting:!0}),e.next=7,g.makeAppointment(a).then((function(e){e.success?n.setState({openSuccess:!0,openErrWait:!1,waiting:!1}):n.setState({openErr:!0,openErrWait:!1,waiting:!1})}));case 7:this.props.updateState();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.appointment_time?r.a.createElement("span",{onClick:function(t){return e.setState({openErr:!1,openSuccess:!1})}},r.a.createElement("div",{id:"makeAppointmentModal",className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("h3",{className:"primary-color"},"Make Appointment with ",this.props.tutor_data.firstName),r.a.createElement("h4",null,j()(this.props.appointment_time).local().format("h:mm A, dddd MMMM Do, YYYY"))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("a",{href:"#!",className:"waves-effect waves-light btn modal-close",onClick:this.onSubmit},"Make Appointment!",r.a.createElement("i",{className:"material-icons right"},"send")))),r.a.createElement(O.a,{open:this.state.openErr,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(k.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Appointment could not be made")),r.a.createElement(O.a,{open:this.state.openErrWait,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(k.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Please wait before requesting another appointment")),r.a.createElement(O.a,{open:this.state.openSuccess,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(k.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"success"},"Appointment with ",this.props.tutor_data.firstName," made!")),this.state.waiting?r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))))):null):r.a.createElement("span",{onClick:function(t){return e.setState({openErr:!1,openSuccess:!1})}},r.a.createElement("div",{id:"makeAppointmentModal",className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("h3",{className:"primary-color"},"Make Appointment with ",this.props.tutor_data.firstName),r.a.createElement("h4",null,"No time slot selected")),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("a",{href:"#!",className:"waves-effect waves-light btn modal-close"},"Take me back",r.a.createElement("i",{className:"material-icons right"},"arrow_back")))),r.a.createElement(O.a,{open:this.state.openErr,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(k.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Appointment could not be made")),r.a.createElement(O.a,{open:this.state.openSuccess,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(k.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"success"},"Appointment with ",this.props.tutor_data.firstName," made!")))}}]),a}(n.Component),K=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={userId:null,subjects:[],tutorAvailability:[],chosenDate:null,user_data:{appointments:[]}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t,a=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.match.params.userId,g.getUserWithId(t).then((function(e){a.setState({userId:t,user_data:e,subjects:e.subjects,tutorAvailability:e.tutorAvailability})}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return"update"===this.state.userId?r.a.createElement(q,{user_data:this.props.user_data}):(this.state.user_data.user_dne&&(window.location.href="/user/update"),this.state.user_data._id&&this.props.user_data._id?this.state.userId===this.props.user_data._id?r.a.createElement(q,{user_data:this.props.user_data}):r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl6 offset-xl3"},r.a.createElement("div",{className:"card-panel grey lighten-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s3 xl1"},r.a.createElement("a",{href:"/user/"+this.state.user_data._id},r.a.createElement("img",{className:"circle responsive-img",alt:this.state.user_data.displayName+"'s pfp",src:this.state.user_data.image}))),r.a.createElement("div",{className:"col s11"},r.a.createElement("h6",{className:"primary-color"},this.state.user_data.displayName),this.state.user_data.grade>0?r.a.createElement("div",{className:"primary-color"},r.a.createElement("span",{className:"black-text"},"Grade: "),z[z.findIndex((function(t){return t.i===e.state.user_data.grade}))].grade):null,r.a.createElement("div",{className:"primary-color"},r.a.createElement("span",{className:"black-text"},"Hours Volunteered: "),this.state.user_data.hours),this.state.subjects.map((function(t,a,n){return 0===n.length?null:0===a?r.a.createElement("span",null,"Subjects ",e.state.user_data.firstName," can tutor:"," ",r.a.createElement("a",{className:"waves-effect waves-light",href:"#"+t},t)):r.a.createElement("span",{className:"secondary-color"},","," ",r.a.createElement("a",{className:"waves-effect waves-light",href:"#"+t},t))})),r.a.createElement("div",null,this.state.user_data.bio?"About "+this.state.user_data.firstName+":":null,r.a.createElement("div",{className:"secondary-color"},this.state.user_data.bio)))),r.a.createElement("div",{className:"row"},this.state.tutorAvailability.filter((function(t){return!(e.state.user_data.appointments.flat().indexOf(t)>=0||e.state.user_data.appointments.flat().indexOf(t-18e5)>=0||e.state.user_data.appointments.flat().indexOf(t+18e5)>=0||e.props.user_data.appointments.flat().indexOf(t)>=0||e.props.user_data.appointments.flat().indexOf(t-18e5)>=0||e.props.user_data.appointments.flat().indexOf(t+18e5)>=0)})).map((function(t,a,n){if(0===n.length||0===e.state.subjects.length)return null;var s=j()(t).local();if(0===a)return r.a.createElement("span",null,r.a.createElement("div",{className:"divider"}),r.a.createElement("h6",null,"Tutor Availability:"),r.a.createElement("h6",{className:"primary-color"},s.format("dddd MMMM Do, YYYY")),r.a.createElement("span",null,r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small modal-trigger",href:"#makeAppointmentModal",onClick:function(){return e.setState({chosenDate:t})}},s.format("h:mm A"))));var l=j()(n[a-1]).local();return s.format("d")!==l.format("d")?r.a.createElement("span",null,r.a.createElement("div",{className:"divider"}),r.a.createElement("h6",{className:"primary-color"},s.format("dddd MMMM Do, YYYY")),r.a.createElement("span",null,r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small modal-trigger",href:"#makeAppointmentModal",onClick:function(){return e.setState({chosenDate:t})}},s.format("h:mm A")))):r.a.createElement("span",null,r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small modal-trigger",href:"#makeAppointmentModal",onClick:function(){return e.setState({chosenDate:t})}},s.format("h:mm A")))})),r.a.createElement(R,{tutor_data:this.state.user_data,user_data:this.props.user_data,appointment_time:this.state.chosenDate,updateState:this.props.updateState})))))):r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))))))}}]),a}(n.Component),z=[{grade:"7",i:7},{grade:"8",i:8},{grade:"9",i:9},{grade:"10",i:10},{grade:"11",i:11},{grade:"12",i:12},{grade:"College and above",i:13}],J=Object(d.g)(K),Q=a(58),X=a(89);var $=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={userId:null,subjects:[],tutorAvailability:[],chosenDate:null,user_data:{appointments:[]}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.getUserWithId(this.props.tutor).then((function(e){t.setState({userId:t.props.tutor,user_data:e,subjects:e.subjects,tutorAvailability:e.tutorAvailability})}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.user_data._id&&this.props.user_data._id?(this.state.user_data.user_dne&&(window.location.href="/user"),r.a.createElement("div",null,r.a.createElement("div",{className:"card-panel grey lighten-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s3 xl1"},r.a.createElement("a",{href:"/user/"+this.state.user_data._id},r.a.createElement("img",{className:"circle responsive-img",alt:this.state.user_data.displayName+"'s pfp",src:this.state.user_data.image}))),r.a.createElement("div",{className:"col s11"},r.a.createElement("h6",{className:"primary-color"},this.state.user_data.displayName),this.state.user_data.grade>0?r.a.createElement("div",{className:"primary-color"},r.a.createElement("span",{className:"black-text"},"Grade: "),Z[Z.findIndex((function(t){return t.i===e.state.user_data.grade}))].grade):null,r.a.createElement("div",{className:"primary-color"},r.a.createElement("span",{className:"black-text"},"Hours Volunteered: "),this.state.user_data.hours),this.state.subjects.map((function(t,a,n){return 0===n.length?null:0===a?r.a.createElement("span",null,"Subjects ",e.state.user_data.firstName," can tutor:"," ",r.a.createElement("a",{className:"waves-effect waves-light",href:"#"+t},t)):r.a.createElement("span",{className:"secondary-color"},","," ",r.a.createElement("a",{className:"waves-effect waves-light",href:"#"+t},t))})),r.a.createElement("div",null,this.state.user_data.bio?"About "+this.state.user_data.firstName+":":null,r.a.createElement("div",{className:"secondary-color"},this.state.user_data.bio)))),r.a.createElement("div",{className:"row"},this.state.tutorAvailability.filter((function(t){return!(t<e.props.time[0]||t>e.props.time[e.props.time.length-1])&&!(e.state.user_data.appointments.flat().indexOf(t)>=0||e.state.user_data.appointments.flat().indexOf(t-18e5)>=0||e.state.user_data.appointments.flat().indexOf(t+18e5)>=0||e.props.user_data.appointments.flat().indexOf(t)>=0||e.props.user_data.appointments.flat().indexOf(t-18e5)>=0||e.props.user_data.appointments.flat().indexOf(t+18e5)>=0)})).map((function(t,a,n){if(0===n.length||0===e.state.subjects.length)return null;var s=j()(t).local();if(0===a)return r.a.createElement("span",null,r.a.createElement("div",{className:"divider"}),r.a.createElement("h6",null,"Tutor Availability:"),r.a.createElement("h6",{className:"primary-color"},s.format("dddd MMMM Do, YYYY")),r.a.createElement("span",null,r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small modal-trigger",href:"#makeAppointmentModal",onClick:function(){return e.setState({chosenDate:t})}},s.format("h:mm A"))));var l=j()(n[a-1]).local();return s.format("d")!==l.format("d")?r.a.createElement("span",null,r.a.createElement("div",{className:"divider"}),r.a.createElement("h6",{className:"primary-color"},s.format("dddd MMMM Do, YYYY")),r.a.createElement("span",null,r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small modal-trigger",href:"#makeAppointmentModal",onClick:function(){return e.setState({chosenDate:t})}},s.format("h:mm A")))):r.a.createElement("span",null,r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small modal-trigger",href:"#makeAppointmentModal",onClick:function(){return e.setState({chosenDate:t})}},s.format("h:mm A")))})),r.a.createElement(R,{tutor_data:this.state.user_data,user_data:this.props.user_data,appointment_time:this.state.chosenDate,updateState:this.props.updateState}))))):r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))}}]),a}(n.Component),Z=[{grade:"7",i:7},{grade:"8",i:8},{grade:"9",i:9},{grade:"10",i:10},{grade:"11",i:11},{grade:"12",i:12},{grade:"College and above",i:13}],ee=$;function te(e){var t=Object(n.useState)(0),a=Object(Q.a)(t,2),s=a[0],l=a[1],i=function(e,t){var a=Object(n.useState)(!0),r=Object(Q.a)(a,2),s=r[0],l=r[1],i=Object(n.useState)(!1),c=Object(Q.a)(i,2),o=c[0],m=c[1],u=Object(n.useState)([]),d=Object(Q.a)(u,2),p=d[0],h=d[1],v=Object(n.useState)(!1),f=Object(Q.a)(v,2),E=f[0],b=f[1];return Object(n.useEffect)((function(){h([])}),[e]),Object(n.useEffect)((function(){l(!0),m(!1),g.getTutorResults({q:e,page:t}).then((function(e){h((function(t){return Object(X.a)(new Set([].concat(Object(X.a)(t),Object(X.a)(e.tutorIDs))))})),b(e.hasMore),l(!1)}))}),[e,t]),{loading:s,error:o,tutors:p,hasMore:E}}(e.query,s),c=i.tutors,o=i.hasMore,m=i.loading,u=Object(n.useRef)(),d=Object(n.useCallback)((function(e){m||(u.current&&u.current.disconnect(),u.current=new IntersectionObserver((function(e){e[0].isIntersecting&&o&&l((function(e){return e+1}))})),e&&u.current.observe(e))}),[m,o]);return r.a.createElement(r.a.Fragment,null,c.filter((function(t){return t!==e.user_data._id})).map((function(t,a){return c.length===a+1?r.a.createElement("div",{ref:d},r.a.createElement(ee,{tutor:t,time:e.query.time,user_data:e.user_data,updateState:e.updateState})):r.a.createElement(ee,{key:t,tutor:t,time:e.query.time,user_data:e.user_data,updateState:e.updateState})})),r.a.createElement("div",null,m?r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))))):null))}var ae=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onChangeAvailableStart=n.onChangeAvailableStart.bind(Object(f.a)(n)),n.onChangeAvailableEnd=n.onChangeAvailableEnd.bind(Object(f.a)(n)),n.onChangeSubjects=n.onChangeSubjects.bind(Object(f.a)(n)),n.onSubmit=n.onSubmit.bind(Object(f.a)(n)),n.state={availableStart:j()().startOf("hour").add(48,"h"),availableEnd:j()().startOf("hour").add(49,"h"),subjects:[],query:{time:[null],subjects:[null]},openErrTime:!1,openErrTime1:!1,openErrSubjects:!1,tutors:[]},n}return Object(o.a)(a,[{key:"onChangeAvailableStart",value:function(e){this.setState({availableStart:e,openErrTime:!1,openErrTime1:!1,openErrSubjects:!1})}},{key:"onChangeAvailableEnd",value:function(e){this.setState({availableEnd:e,openErrTime:!1,openErrTime1:!1,openErrSubjects:!1})}},{key:"onChangeSubjects",value:function(e,t){t.length>5?this.setState({subjects:t,openErrTime:!1,openErrTime1:!1,openErrSubjects:!0}):this.setState({subjects:t,openErrTime:!1,openErrTime1:!1,openErrSubjects:!1})}},{key:"onSubmit",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var a,n,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.state.availableStart.clone(),n=this.state.availableEnd.clone(),n=a.clone().startOf("day").hour(n.hour()).minute(n.minute()).utc().valueOf(),a=a.utc().valueOf(),n<a&&n-a<=432e5&&(n+=864e5),a+18e5>n)this.setState({openErrTime:!0});else if(a-864e5<(new Date).valueOf())this.setState({openErrTime1:!0});else if(this.state.subjects.length>5)this.setState({openErrSubjects:!0});else{for(r=[],s=Math.ceil(a/18e5);s<Math.floor(n/18e5);s++)r.push(18e5*s);this.setState({tutors:[],query:{time:r,subjects:this.state.subjects}})}case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.user_data._id?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl6 offset-xl3"},r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col s12",onSubmit:this.onSubmit,id:"Find_Tutor_Form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(Y.a,{container:!0,justify:"space-between"},r.a.createElement(T.a,{utils:D.a},r.a.createElement(I.a,{variant:"inline",margin:"normal",id:"search_date",label:"Date",format:"M/D/YYYY",value:this.state.availableStart,onChange:this.onChangeAvailableStart,KeyboardButtonProps:{"aria-label":"change date"}}),r.a.createElement(B.a,{variant:"inline",margin:"normal",id:"time_start",label:"Time range start",value:this.state.availableStart,onChange:this.onChangeAvailableStart,KeyboardButtonProps:{"aria-label":"change time"}}),r.a.createElement(B.a,{variant:"inline",margin:"normal",id:"time_end",label:"Time range end",value:this.state.availableEnd,onChange:this.onChangeAvailableEnd,KeyboardButtonProps:{"aria-label":"change time"}}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(H.a,{multiple:!0,id:"subjects",size:"small",options:ne.filter((function(t){return e.props.user_data.subjects.indexOf(t)<0})),getOptionLabel:function(e){return e},filterSelectedOptions:!0,onChange:this.onChangeSubjects,renderInput:function(e){return r.a.createElement(L.a,Object.assign({},e,{label:"Subjects",helperText:"Filter tutors by subjects"}))}}))),r.a.createElement("input",{type:"submit",value:"Find tutors",className:"waves-effect waves-light btn cyan"}))),r.a.createElement(te,{query:this.state.query,user_data:this.props.user_data,updateState:this.props.updateState})),r.a.createElement(O.a,{open:this.state.openErrTime,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(k.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Your search time range must be atleast 30 minutes")),r.a.createElement(O.a,{open:this.state.openErrTime1,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(k.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Your search time must be atleast 24 hours ahead")),r.a.createElement(O.a,{open:this.state.openErrSubjects,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(k.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Your subject filter must be no larger than 5 subjects"))):r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))}}]),a}(n.Component),ne=["Math","Algebra","Algebra 2","Geometry","Precalculus","AP Statistics","Calculus","AP Calculus AB","AP Calculus BC","AP Economics Micro","AP Economics Macro","Biology","AP Biology","AP Enviromental Science","Chemistry","AP Chemistry","Physics","AP Physics 1","AP Physics 2","AP Physics C","English","AP English Lang","AP English Lit","AP Psychology","History","AP Human Geography","AP US History","AP European History","AP World History","Spanish","AP Spanish","Chinese","AP Chinese","French","AP French","AP Computer Science P","AP Computer Science A"],re=ae,se=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return this.props.user_data._id?r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl6 offset-xl3"},r.a.createElement("div",{className:"card-panel grey lighten-5"},r.a.createElement("div",{className:"tutorial-container"},r.a.createElement("iframe",{className:"tutorial-video",title:"tutorial video",src:"https://www.youtube.com/embed/dQw4w9WgXcQ",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:!0})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"right"},r.a.createElement("a",{href:"/user/update",className:"waves-effect waves-light btn",style:{margin:"0.7em"}},"Continue",r.a.createElement("i",{className:"material-icons right"},"arrow_forward")))))))):r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))}}]),a}(n.Component),le=a(142),ie=a.n(le);a(218);var ce=function(e){return r.a.createElement("div",{className:"card-panel row"},r.a.createElement("span",{className:"left"},e.message),r.a.createElement("img",{className:"circle right",src:e.image,alt:e.firstName+"'s pfp",style:{height:"2em"}}))},oe=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).hanleSearchChange=function(e){n.setState({chatMessage:e.target.value})},n.onDrop=function(e){console.log(e)},n.submitChatMessage=function(e){e.preventDefault();var t=n.state.chatMessage,a=n.props.user_data._id,r=j()();n.socket.emit("Input Chat Message",{chatMessage:t,userId:a,nowTime:r,type:"Text"}),n.setState({chatMessage:""})},n.state={roomId:null,message:""},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.match.params.roomId;case 2:return t=e.sent,this.setState({roomId:t}),console.log(t),e.t0=console,e.next=8,this.props.user_data.chat_passwords[t];case 8:e.t1=e.sent,e.t0.log.call(e.t0,e.t1),"http://localhost:3001",this.socket=ie()("http://localhost:3001"),this.socket.emit("connectToRoom",t),console.log("connected"),this.socket.on("accessDenied",(function(e){console.log(e),window.location.href="/chat"})),this.socket.on("newMessage",(function(e){console.log(e)}));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"col s12 xl8 offset-xl2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("div",{className:"card-panel chat-config",style:{margin:"0.5em"}},r.a.createElement(ce,{key:null,message:"Hello World",image:this.props.user_data.image,firstName:this.props.user_data.firstName})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl11"},r.a.createElement("textarea",{id:"Message",className:"materialize-textarea",style:{margin:"0.5em"}})),r.a.createElement("div",{className:"col s12 xl1"},r.a.createElement("a",{href:"#Send",className:"btn waves-effect waves-light blue",style:{margin:"0.5em"}},r.a.createElement("i",{className:"material-icons"},"send")),r.a.createElement("a",{href:"#Send",className:"btn-floating btn waves-effect waves-light blue",style:{margin:"0.5em"}},r.a.createElement("i",{className:"material-icons"},"attach_file")))))}}]),a}(n.Component),me=Object(d.g)(oe),ue=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).updateState=e.updateState.bind(Object(f.a)(e)),e.state={logged_in:!0,user_data:{}},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.getLoggedIn().then((function(e){return t.setState({logged_in:e})})),g.getUser().then((function(e){return t.setState({user_data:e})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateState",value:function(){var e=this;g.getUser().then((function(t){return e.setState({user_data:t})}))}},{key:"render",value:function(){var e=this;return this.state.logged_in?r.a.createElement("div",null,r.a.createElement(_,{user_data:this.state.user_data}),r.a.createElement(d.b,{exact:!0,path:"/",render:function(){return r.a.createElement(M,{user_data:e.state.user_data,updateState:e.updateState})}}),r.a.createElement(d.b,{path:"/tutorial",render:function(){return r.a.createElement(se,{user_data:e.state.user_data})}}),r.a.createElement(d.b,{path:"/user/:userId",render:function(){return r.a.createElement(J,{user_data:e.state.user_data,updateState:e.updateState})}}),r.a.createElement(d.b,{path:"/chat/:roomId",render:function(){return r.a.createElement(me,{user_data:e.state.user_data,updateState:e.updateState})}}),r.a.createElement(d.b,{path:"/learn",render:function(){return r.a.createElement(re,{user_data:e.state.user_data,updateState:e.updateState})}}),r.a.createElement(d.b,{path:"/volunteer",render:function(){return r.a.createElement(G,{user_data:e.state.user_data})}}),r.a.createElement(d.b,{path:"/appointments",render:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl8 offset-xl2"},r.a.createElement(P,{user_data:e.state.user_data,updateState:e.updateState})))}})):r.a.createElement(d.a,{to:{pathname:"/login"}})}}]),a}(n.Component),de=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={logged_in:!1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.getLoggedIn().then((function(e){return t.setState({logged_in:e})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.logged_in?r.a.createElement(d.a,{to:{pathname:"/"}}):r.a.createElement("div",null,r.a.createElement("nav",{className:"primary-color-background"},r.a.createElement("div",{className:"nav-wrapper container"},r.a.createElement("a",{href:"/",className:"brand-logo center"},"ConnectedPeer"))),r.a.createElement("div",{className:"row section"},r.a.createElement("div",{className:"col s12 m6 offset-m3 xl4 offset-xl4"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-image"},r.a.createElement("a",{href:"https://connectedpeertutoring.org"},r.a.createElement("img",{src:"/Connected.svg",alt:"ConnectedPeer Logo"}))),r.a.createElement("div",{className:"card-content center-align"},r.a.createElement("a",{href:"http://localhost:3001/auth/google"},r.a.createElement("img",{src:"/GoogleLogin.png",onMouseOver:function(e){return e.currentTarget.src="/GoogleLoginHover.png"},onMouseOut:function(e){return e.currentTarget.src="/GoogleLogin.png"},alt:"Google Login"})))))))}}]),a}(n.Component),pe=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/login",component:de}),r.a.createElement(d.b,{path:"/",component:ue}))}}]),a}(n.Component),he=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ve(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(r.a.createElement(i.a,null,r.a.createElement(pe,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");he?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ve(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):ve(e)}))}}()}},[[157,1,2]]]);
//# sourceMappingURL=main.9e42c365.chunk.js.map